(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.charsheet = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";var character_model={app:"character-sheet-5e",key:"",charname:"",charclass:"",race:"",background:"",alignment:"",level:1,experience:0,inspiration:"",proficiency:"+2",armor_class:"",speed:30,hp_cur:"",hp_max:"",hd_cur:"",hd_max:"",deathSave:{success:0,fail:0},str:10,dex:10,con:10,intel:10,wis:10,cha:10,saves:{str:0,dex:0,con:0,intel:0,wis:0,cha:0},skills:{acrobatics:0,animal_handling:0,arcana:0,athletics:0,deception:0,history:0,insight:0,intimidation:0,investigation:0,medicine:0,nature:0,perception:0,performance:0,persuasion:0,religion:0,sleight_of_Hand:0,stealth:0,survival:0},weapons:"",proficiencies_other:"",languages:"",traits:"",ideals:"",bonds:"",flaws:"",appearance:"",equipment:"",cp:"",sp:"",gp:"",pp:"",features:"",notes:"",notes_adv:"",notes_cam:"",spell_ability:"",spell_save:"",spell_attack:"",spell_slots:{1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},spell_slots_cur:{1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},spells:{0:[],1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:""},updated:""},ui={attribute_fields:Array.from(document.querySelectorAll(".pc-attributes input[type=number]")),attribute_saves:Array.from(document.querySelectorAll(".pc-attributes input[type=checkbox]")),skill_checks:Array.from(document.querySelectorAll('input[data-name="skills"]')),dialog_unsaved:document.querySelector(".alert-unsaved"),spell_slots:Array.from(document.querySelectorAll("input[data-name=spell_slots]")),spell_lists:Array.from(document.querySelectorAll("ul[data-name=spells]")),calcAttrMod:function(e){var t=Math.floor((e-10)/2);return t>0?"+"+t:t},calcSaveMod:function(e){var t=0,a=document.querySelector("[data-name="+e+"]").parentNode,r=a.querySelector(".pc-attribute-mod").innerHTML,n=a.querySelector(".pc-save-mod"),i=a.querySelector("input[type=checkbox]").checked;i&&(t=document.querySelector('[data-name="proficiency"]').innerHTML,t=""===t?0:parseInt(t,10));var s=0+parseInt(t,10)+parseInt(r,10);n.innerHTML=s>0?"+"+s:s},calcSkillMod:function(e){var t=e.checked,a=e.getAttribute("data-attr"),r=e.parentNode.nextElementSibling,n=0;t&&(n=document.querySelector('[data-name="proficiency"]').innerHTML,n=""===n?0:parseInt(n,10));var i=document.querySelector("[data-name="+a+"]"),s=parseInt(this.calcAttrMod(i.value),10),o=0+n+s;r.innerText=o>0?"+"+o:o},calcProfMod:function(){var e=this,t=document.querySelector("[data-name=proficiency]"),a=t.innerHTML,r=parseInt(document.querySelector("[data-name=level]").innerHTML,10),n=Math.ceil(r/4)+1,i="+"+n;a!==i&&(t.innerHTML="+"+n,this.attribute_fields.forEach(function(t){e.calcSaveMod(t.getAttribute("data-name"))}),this.skill_checks.forEach(function(t){e.calcSkillMod(t)}))},contentEditableFocus:function(e){"true"===e.target.getAttribute("contenteditable")&&e.target.setAttribute("data-before",e.target.innerHTML)},contentEditableBlur:function(e){if("true"===e.target.getAttribute("contenteditable")){var t=e.target.getAttribute("data-before"),a=e.target.innerHTML,r=a.trim();if(r=r.replace(/(<br\/?>)+$/,""),r!==a&&(e.target.innerHTML=r),t!==e.target.innerHTML&&(e.target.removeAttribute("data-before"),this.dialog_unsaved.classList.add("open"),"level"===e.target.getAttribute("data-name")))return void this.calcProfMod()}},attributeChange:function(e){var t=this,a=e.target.parentNode,r=a.querySelector(".pc-attribute-mod");r.innerText=this.calcAttrMod(e.currentTarget.value);var n=e.target.getAttribute("data-name");this.calcSaveMod(n);var i=Array.from(document.querySelectorAll("[data-attr="+n+"]"));i.forEach(function(e){t.calcSkillMod(e)}),this.dialog_unsaved.classList.add("open")},saveChange:function(e){var t=e.currentTarget.getAttribute("data-subfield");this.calcSaveMod(t),this.dialog_unsaved.classList.add("open")},skillChange:function(e){this.calcSkillMod(e.currentTarget),this.dialog_unsaved.classList.add("open")},spellSlotChange:function(e){var t=e.target.getAttribute("data-subfield"),a=parseInt(e.target.value,10),r=document.querySelector('[data-name="spells"][data-subfield="'+t+'"]');a?r.parentNode.classList.remove("hidden"):r.parentNode.classList.add("hidden"),this.dialog_unsaved.classList.add("open")},spellKeyPress:function(e){if(("LI"===e.target.tagName||e.target.closest("li"))&&13===e.which){e.preventDefault();var t=document.createElement("li");t.setAttribute("contenteditable","true"),e.currentTarget.appendChild(t),t.focus()}},postRender:function(){this.calcProfMod(),this.attribute_fields.forEach(function(e){var t=new Event("change");e.dispatchEvent(t)}),this.dialog_unsaved.classList.remove("open")},initialize:function(){var e=this;document.querySelector(".container").addEventListener("focus",this.contentEditableFocus.bind(this),!0),document.querySelector(".container").addEventListener("blur",this.contentEditableBlur.bind(this),!0),this.attribute_fields.forEach(function(t){t.addEventListener("change",e.attributeChange.bind(e))}),this.attribute_saves.forEach(function(t){t.addEventListener("change",e.saveChange.bind(e))}),this.skill_checks.forEach(function(t){t.addEventListener("change",e.skillChange.bind(e))}),this.spell_slots.forEach(function(t){t.addEventListener("change",e.spellSlotChange.bind(e))}),this.spell_lists.forEach(function(t){t.addEventListener("keypress",e.spellKeyPress.bind(e))})}},intro=function(){var e=[],t=document.createElement("h2");t.innerHTML="Character Sheet. 5e.",e.push(t);var a=document.createElement("p");a.innerHTML="An online character sheet for 5th edition D&D, usable offline (in some browsers).",e.push(a);var r=document.createElement("p");r.innerHTML="Designed for modern browsers, if all else fails Chrome is your best bet and IE is your worst bet.",e.push(r);var n=document.createElement("p");n.innerHTML="<strong>Warning:</strong> Character data is saved to your browser's local storage. This means it can be erased if you delete browser data and will not automatically transfer between browsers even on the same computer. Please Save and Backup often (or at least at the end of every gaming session)!",e.push(n);var i=document.createElement("p");return i.innerHTML="This message will only appear until you save your first character.",e.push(i),e};module.exports={model:character_model,ui:ui,intro:intro};
},{}],2:[function(require,module,exports){
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Storage={prefix:"",setPrefix:function(e){this.prefix=e},get:function(e){var t=localStorage.getItem(""+this.prefix+e);return null===t&&(t=localStorage.getItem(e),null!==t&&this.set(e,t)),null!==t?JSON.parse(t):""},set:function(e,t){try{localStorage.setItem(""+this.prefix+e,JSON.stringify(t)),null!==localStorage.getItem(e)&&localStorage.removeItem(e)}catch(e){return!1}return!0},remove:function(e){localStorage.removeItem(""+this.prefix+e)},getAllKeys:function(){var e=[];if(localStorage.length>0)for(var t=new RegExp("^("+this.prefix+")+","i"),r=0;r<localStorage.length;r++){var a=localStorage.key(r);(0===a.indexOf(this.prefix)||a.match(/^[a-z0-9]{7}$/))&&(a=a.replace(t,""),e.push(a))}return e}},ActionMenu={el:null,opener:null,initialize:function(){var e=this;this.el=document.querySelector(".app-actions"),this.opener=document.querySelector(".btn-open-actions"),this.opener.addEventListener("click",function(t){e.el.classList.contains("open")&&(e.el.style.overflow="hidden"),e.el.classList.toggle("open")}),this.el.addEventListener("transitionend",function(t){var r=window.getComputedStyle(e.el);"0px"!==r.getPropertyValue("max-height")&&(e.el.style.overflow="visible")});var t=this.el.querySelector(".btn-backup");t.addEventListener("click",function(e){BackupDialog.open("download")});var r=this.el.querySelector(".btn-save");r.addEventListener("click",function(e){Manager.saveCharacter()});var a=this.el.querySelector(".btn-new-character");a.addEventListener("click",function(e){window.location.hash="#"+Manager.generateKey()});var n=this.el.querySelector(".btn-restore-backup");n.addEventListener("click",function(e){BackupDialog.open("restore")});var i=this.el.querySelector(".btn-load");i.addEventListener("click",function(e){LoadMenu.toggle()})}},LoadMenu={el:document.querySelector("#character_list"),open:function(){this.el.classList.add("open")},toggle:function(){this.el.classList.toggle("open")},close:function(){this.el.classList.remove("open")},addCharacter:function(e){if("undefined"!=typeof e&&""!==e)try{if(e.key&&""!==e.key){var t=this.el.querySelector('a[href="#'+e.key+'"]');if(null!==t)return void(t.textContent=e.charname+" ("+e.charclass+" "+e.level+")");var r=document.createElement("li"),a=document.createElement("a");a.textContent=e.charname+" ("+e.charclass+" "+e.level+")",a.setAttribute("href","#"+e.key),r.appendChild(a);var n=document.createElement("a");n.classList.add("delete"),n.innerHTML="❌",n.setAttribute("href","#"),n.setAttribute("data-key",e.key),r.appendChild(n),this.el.querySelector("#saved_characters").appendChild(r)}}catch(e){console.log(e.message)}},removeCharacter:function(e){var t=this.el.querySelector('a[href="#'+e+'"]'),r=t.parentNode;r.parentNode.removeChild(r)},isEmpty:function(){return null===this.el.querySelector("li")},initialize:function(){var e=this;document.body.addEventListener("click",function(t){var r=t.target.closest("#"+e.el.id);if(null===r){if(t.target.classList.contains("btn-load"))return;e.close()}else t.target.classList.contains("delete")&&(t.preventDefault(),Manager.deletePrompt(t.target.getAttribute("data-key")),e.close())})}},Alert={el:document.querySelector(".alert-main"),setContent:function(e){Array.isArray(e)||(e=[e]),this.clear();var t=document.createDocumentFragment();e.forEach(function(e){t.appendChild(e)});var r=document.createElement("button");r.setAttribute("type","button"),r.classList.add("close"),r.textContent="Close",t.appendChild(r),this.el.appendChild(t),this.el.classList.add("open")},clear:function(){for(this.el.classList.remove("open");this.el.firstChild;)this.el.removeChild(this.el.firstChild)},initialize:function(){var e=this;this.el.addEventListener("click",function(t){if(t.target.classList.contains("close"))t.preventDefault(),e.clear();else if(t.target.classList.contains("delete-conf")){var r=t.target.getAttribute("data-key");e.clear(),Manager.deleteCharacter(r)}})}},HelpDialog={el:document.getElementById("dialog_help"),opener:document.querySelector(".btn-help"),closer:document.querySelector("#dialog_help .close"),initialize:function(){var e=this;this.opener.addEventListener("click",function(t){e.el.classList.add("open"),e.el.querySelector("h1").focus()}),this.closer.addEventListener("click",function(t){e.el.classList.remove("open")}),document.body.addEventListener("click",function(t){var r=t.target.closest("#dialog_help");if(null===r){if(t.target.classList.contains("btn-help"))return;e.el.classList.remove("open")}})}},BackupDialog={el:document.getElementById("dialog-backup"),open:function(e){"restore"===e?this.addRestoreForm():"download"===e&&this.addDownloadForm(),this.el.classList.add("open"),this.el.querySelector("legend").focus()},close:function(){for(this.el.classList.remove("open");this.el.firstChild;)this.el.removeChild(this.el.firstChild)},getCloseButton:function(){var e=document.createElement("button");return e.setAttribute("type","button"),e.classList.add("close"),e.textContent="Close",e},addRestoreForm:function(){var e=document.createElement("form");e.id="form_backup_restore";var t='<label for="files">Restore from file</label>\n            <input type="file" id="files" name="files" />\n            <p>or</p>\n            <label for="backup_data">Paste the character backup data</label>\n            <textarea id="backup_data" name="backup_data"></textarea>\n            <button type="submit">Restore</button>\n            <button type="button">Cancel</button>';e.innerHTML=t,e.addEventListener("submit",function(e){Manager.restoreFormSubmit(e)}),this.el.appendChild(e)},addDownloadForm:function(){var e=document.createElement("form");e.id="form_backup_download";var t=[];Storage.getAllKeys().forEach(function(e){var r=Storage.get(e);if(r.key){var a='<li><label><input type="checkbox" name="'+r.key+'" value="'+r.key+'" /> '+r.charname+" ("+r.charclass+" "+r.level+")</label></li>";t.push(a)}});var r='<fieldset>\n            <legend tabindex="-1">Pick characters to download.</legend>\n            <ul>\n                '+t.join("")+'\n            </ul>\n        </fieldset>\n        <fieldset>\n            <legend>Pick a format</legend>\n            <ul>\n            <li><label><input type="radio" name="format" value="file" checked> File download</label></li>\n            <li><label><input type="radio" name="format" value="email"> Email data</label></li>\n        </fieldset>\n        <button type="submit">Download</button>\n        <button type="button">Cancel</button>';e.innerHTML=r,e.addEventListener("submit",function(e){Manager.downloadBackup(e)}),this.el.appendChild(e)},altDownload:function(e){var t=document.createElement("p");t.innerHTML="Your current browser/os does not support direct file downloads, so here is the data for you to copy/paste.";var r=document.createElement("textarea");for(r.classList.add("large"),r.value=e;this.el.firstChild;)this.el.removeChild(this.el.firstChild);this.el.appendChild(t),this.el.appendChild(r),this.el.appendChild(this.getCloseButton()),r.focus(),r.select()},emailDownload:function(e){var t=document.createElement("p");for(t.appendChild(e);this.el.firstChild;)this.el.removeChild(this.el.firstChild);this.el.appendChild(t),this.el.appendChild(this.getCloseButton())},initialize:function(){var e=this;this.el.addEventListener("click",function(t){"BUTTON"===t.target.tagName&&"button"===t.target.getAttribute("type")&&e.close()})}},Manager=module.exports={character_model:null,rules_ui:null,cur_character:null,appname:"",dialog_unsaved:document.querySelector(".alert-unsaved"),characterJSON:function(){var e={};for(var t in this.cur_character)e[t]=this.cur_character[t];return JSON.stringify(e)},currentTimestamp:function(){var e=new Date;return e.toUTCString()},generateKey:function(){for(var e=(Math.random().toString(36)+"00000000000000000").slice(2,9);""!==Storage.get(e);)e=(Math.random().toString(36)+"00000000000000000").slice(2,9);return e},setCurCharacterData:function(e){var t=this;if("object"===("undefined"==typeof e?"undefined":_typeof(e))){var r=Object.keys(e);r.forEach(function(r){"undefined"!=typeof t.cur_character[r]&&(t.cur_character[r]=e[r])})}},changeCharacter:function(){var e=window.location.hash.substr(1);this.loadCharacter(e),LoadMenu.close()},loadCharacter:function(e){this.dialog_unsaved.classList.remove("open");var t=Storage.get(e);return""===t?(this.cur_character=Object.create(this.character_model),this.cur_character.key=e,void this.renderCharacter()):(this.cur_character=Object.create(this.character_model),this.setCurCharacterData(t),void this.renderCharacter())},renderCharacter:function(){var e=this;if(null!==this.cur_character){var t=Array.from(document.querySelectorAll("*[data-name]"));t.forEach(function(t){var r=t.getAttribute("data-name");if("undefined"!=typeof e.cur_character[r]){var a=t.getAttribute("data-subfield");null!==a&&"undefined"==typeof e.cur_character[r][a]||"undefined"!=typeof e.cur_character[r]&&!function(){switch(t.tagName){case"INPUT":case"SELECT":case"TEXTAREA":if("checkbox"===t.getAttribute("type")){var n=a?e.cur_character[r][a]:e.cur_character[r];1===n?t.checked=!0:t.checked=!1;break}t.value=a?e.cur_character[r][a]:e.cur_character[r];var i=new Event("change");t.dispatchEvent(i);break;case"UL":for(;t.firstChild;)t.removeChild(t.firstChild);var o=a?e.cur_character[r][a]:e.cur_character[r];Array.isArray(o)||(o=o.split(/;|<br\/?>/));var c=t.querySelector("li:empty");o.length>0&&o.forEach(function(e){if(""!==e){var r=document.createElement("li");r.setAttribute("contenteditable","true"),r.innerHTML=e,t.insertBefore(r,c)}});var l=document.createElement("li");l.setAttribute("contenteditable","true"),t.appendChild(l);break;default:t.innerHTML=a?e.cur_character[r][a]:e.cur_character[r];var s=new Event("blur");t.dispatchEvent(s)}}()}}),this.rules_ui.postRender()}},saveCharacter:function(){var e=this;null===this.cur_character&&(this.cur_character=Object.create(this.character_model));var t=Array.from(document.querySelectorAll("*[data-name]"));if(t.forEach(function(t){var r=t.getAttribute("data-name");if("undefined"!=typeof e.cur_character[r]){var a=t.getAttribute("data-subfield");if(null!==a){if("undefined"==typeof e.cur_character[r][a])return;e.cur_character.hasOwnProperty(r)||(e.cur_character[r]=e.character_model[r])}!function(){switch(t.tagName){case"INPUT":case"SELECT":case"TEXTAREA":if("checkbox"===t.getAttribute("type")){var n=t.checked?1:0;a?e.cur_character[r][a]=n:e.cur_character[r]=n;break}a?e.cur_character[r][a]=t.value:e.cur_character[r]=t.value;break;case"UL":var i=[],o=Array.from(t.querySelectorAll("li"));o.length>0&&o.forEach(function(e){var t=e.innerHTML;""!==t&&i.push(t)}),a?e.cur_character[r][a]=i:e.cur_character[r]=i;break;default:a?e.cur_character[r][a]=t.innerHTML:e.cur_character[r]=t.innerHTML}}()}}),""===this.cur_character.charname){var r=document.createElement("p");return r.innerHTML="Your character must have name to save!",void Alert.setContent(r)}this.cur_character.updated=this.currentTimestamp(),this.cur_character.app=this.appname,Storage.set(this.cur_character.key,this.cur_character),this.dialog_unsaved.classList.remove("open"),LoadMenu.addCharacter(this.cur_character)},downloadBackup:function(e){var t=this;e.preventDefault();var r=[],a=[],n=e.target,i=Array.from(n.querySelectorAll("input[type=checkbox]:checked"));i.forEach(function(e){var t=Storage.get(e.value);r.push(t),a.push(t.charname)});var o=n.querySelector("input[name=format]:checked").value,c=new Date;if("email"===o){var l="Below is the backup data for your character(s) "+a.join(", ")+".\n\nTo use this data, go to: "+window.location.href+' and click the "Restore Backup" button. Then paste the text below into the box.\n\n---\n\n'+JSON.stringify(r),s="mailto:?subject="+encodeURIComponent("Character backup: "+a.join(", ")+" ("+c.toLocaleString()+")")+"&body="+encodeURIComponent(l),u=document.createElement("a");u.href=s,u.innerHTML="Open new message in default email client",u.addEventListener("click",function(e){BackupDialog.close()}),BackupDialog.emailDownload(u)}else{var d=function(){if("function"!=typeof window.Blob)return BackupDialog.altDownload(JSON.stringify(r)),{v:void 0};var e=document.createElement("a"),a=new Blob([JSON.stringify(r)],{type:"application/json"}),n=URL.createObjectURL(a);e.href=n,e.download=t.appname+"_"+c.getFullYear()+"_"+(c.getMonth()+1)+"_"+c.getDate(),document.body.appendChild(e),e.click(),setTimeout(function(){document.body.removeChild(e),window.URL.revokeObjectURL(n)},0)}();if("object"===("undefined"==typeof d?"undefined":_typeof(d)))return d.v}},restoreFormSubmit:function(e){var t=this;e.preventDefault();var r=e.target.querySelector("input[type=file]"),a=e.target.querySelector("textarea");r.files&&r.files.length>0?Array.from(r.files).forEach(function(e){var r=new FileReader;r.onload=function(e){return function(e){t.restoreCharacters(e.target.result)}}(e),r.readAsText(e)}):""!==a.value&&this.restoreCharacters(a.value),BackupDialog.close()},restoreCharacters:function(e){var t=this;try{!function(){var r=e.indexOf("[{"),a=e.lastIndexOf("}]"),n=e.indexOf(":[{");n!==-1&&n<r&&(r=-1),r===-1?(r=e.indexOf("{"),a=e.lastIndexOf("}"),e=e.substring(r),e=e.substring(0,a+1)):(e=e.substring(r),e=e.substring(0,a+2)),e=e.trim(),e=e.replace(/\},[\r\n]+\{/g,"},{"),e=e.replace(/(?:\r\n|\r|\n)/g,"<br/>");var i=JSON.parse(e);Array.isArray(i)||(i=[i]);var o=[];i.forEach(function(e){if("object"!==("undefined"==typeof e?"undefined":_typeof(e))||!e.key||e.app!==t.appname)throw new Error("Data appears to be invalid. Try removing any text that isn't part of the backup (i.e. email introduction).");var r=Storage.get(e.key);if(""!==r&&""!==r.charname&&r.charname!==e.charname)if(e.key_prev){var a=e.key_prev;e.key_prev=e.key,e.key=a}else e.key_prev=e.key,e.key=t.generateKey();Storage.set(e.key,e),LoadMenu.addCharacter(e),e.key===t.cur_character.key&&t.loadCharacter(e.key);var n=document.createElement("li");n.textContent=e.charname+" has been added. ";var i=document.createElement("a");i.setAttribute("href","#"+e.key),i.textContent="View character now.",i.addEventListener("click",function(e){Alert.clear()}),n.appendChild(i),o.push(n)});var c=document.createElement("ul");o.forEach(function(e){c.appendChild(e)}),Alert.setContent(c)}()}catch(e){var r=document.createElement("p");r.innerHTML="Error processing backup data: "+e.message,Alert.setContent(r)}},deletePrompt:function(e){var t=Storage.get(e);if(""!==t){var r=[],a=document.createElement("p");a.innerHTML="Are you sure you want to delete the character: "+(t.charname?t.charname:"[Unnamed]"),r.push(a);var n=document.createElement("button");n.innerHTML="Yes, Delete.",n.setAttribute("data-key",t.key),n.classList.add("delete-conf"),r.push(n),Alert.setContent(r)}},deleteCharacter:function(e){if(""!==e&&"settings"!==e)if(Storage.remove(e),""!==Storage.get(e)){var t=document.createElement("p");t.innerHTML="Error deleting the character...",Alert.setContent(t)}else LoadMenu.removeCharacter(e),null!==this.cur_character&&this.cur_character.key===e&&(window.location.hash="#"+Manager.generateKey())},checkFeatures:function(){var e=!1;if("localStorage"in window&&null!==window.localStorage||(e=!0),e){var t=document.createElement("p");t.textContent="Sorry, your browser does not supported the required features for this app to work. Try using the latest Chrome or Firefox for best results.",Alert.setContent(t)}},checkCache:function(){if("applicationCache"in window){var e=function(e){var t=document.createElement("p");t.textContent="Character Sheet has been updated with new features or bug fixes. Please reload the page to get the newest code. If you have this site open in multiple tabs/windows please close them all.",Alert.setContent(t)};window.applicationCache.addEventListener("updateready",e,!1),window.applicationCache.status===window.applicationCache.UPDATEREADY&&e()}},showIntroDialog:function(){Alert.setContent(this.intro())},initialize:function(e){var t=this;if(!e.rules||!e.prefix||!e.appname)return void(document.body.innerHTML="<p>App is missing required settings.</p>");this.character_model=e.rules.model,this.rules_ui=e.rules.ui,this.appname=e.appname,this.intro=e.rules.intro,Storage.setPrefix(e.prefix),Alert.initialize(),this.checkFeatures(),this.checkCache(),HelpDialog.initialize(),ActionMenu.initialize(),LoadMenu.initialize(this),BackupDialog.initialize(),Storage.getAllKeys().forEach(function(e){var t=Storage.get(e);LoadMenu.addCharacter(t)}),LoadMenu.isEmpty()&&this.showIntroDialog(),this.rules_ui.initialize(),document.querySelector("nav").addEventListener("click",function(e){if("A"===e.target.tagName){e.preventDefault();var t=e.target.getAttribute("href").substring(1);document.getElementById(t).scrollIntoView()}}),window.addEventListener("hashchange",function(e){t.changeCharacter()},!1);var r=window.location.hash.substr(1);""!==r?this.loadCharacter(r):window.location.hash="#"+this.generateKey()}};
},{}],3:[function(require,module,exports){
"use strict";var rules=require("./Character5e.js"),Manager=require("./Manager.js");"serviceWorker"in navigator&&navigator.serviceWorker.register("service_worker.js",{scope:"/"}),Manager.initialize({rules:rules,prefix:"charsheet-5e-",appname:"character-sheet-5e"});
},{"./Character5e.js":1,"./Manager.js":2}]},{},[3])(3)
});


//# sourceMappingURL=main.js.map